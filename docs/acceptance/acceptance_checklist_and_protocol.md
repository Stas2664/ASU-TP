# Приемка: чек‑лист и протокол

Проект: Схема единой БД ПТК АСУ ТП (АО «НИКИЭТ»)
Дата: __________________
Версия: 1.0.0

## 1. Чек‑лист соответствия ТЗ

- [ ] Структура БД разработана в соответствии с ТЗ (раздел 3.1.1)
  - [ ] Схемы: core, tech_params, controllers, archive, algorithms, visualization, topology, kross, security, events, reports
  - [ ] Таблицы параметров, контроллеров, архивов, алгоритмов, видеокадров, топологии, платформы КРОСС, событий, безопасности, отчетов
- [ ] Ролевая модель реализована (раздел 2.2 п.2)
  - [ ] Роли и разрешения созданы (security.roles / permissions)
  - [ ] Связи роль⇄разрешение и пользователь⇄роль настроены
  - [ ] Политики RLS включены на чувствительных таблицах
- [ ] Алгоритм единовременного доступа реализован (раздел 2.2 п.3)
  - [ ] Функции advisory lock/unlock
  - [ ] Логирование в security.audit_log
- [ ] Производительность
  - [ ] Индексы (включая GIN/BRIN/pg_trgm)
  - [ ] ANALYZE выполнен
- [ ] Развертывание
  - [ ] Скрипты SQL 01–08
  - [ ] Инструкции и скрипты для Docker/Local/Railway
- [ ] Документация приемочного комплекта
  - [ ] Техническая справка (technical_brief.md)
  - [ ] Ролевая модель (role_model.md)
  - [ ] ER‑диаграмма (dbml/png)
  - [ ] Настоящий чек‑лист и протокол

## 2. Функциональные испытания

- [ ] Создание параметра, установка уставок, запись текущего значения
- [ ] Связь параметра с каналом ввода‑вывода и контроллером
- [ ] Архивирование значения (INSERT в archive.historical_data)
- [ ] Выполнение алгоритма с входами/выходами
- [ ] Отрисовка параметра на видеокадре (связь screen_elements)
- [ ] Генерация/квитирование события
- [ ] Формирование записи в отчете (report_history)

## 3. Испытания безопасности

- [ ] Аутентификация пользователя
- [ ] Проверка прав (security.check_permission)
- [ ] Проверка RLS (доступ к security.users и object_permissions)
- [ ] Аудит действий записывается в security.audit_log

## 4. Нагрузочные испытания (минимум)

- [ ] Одновременная запись текущих значений для N=10k параметров (имитация)
- [ ] Чтение архивов за период ≥ 1e6 записей (тест индексов)

## 5. Протокол приемки

Комиссия в составе: ________________________________________________

Результаты проверки:

1) Соответствие ТЗ:  [Соответствует / Замечания] ______________________
2) Испытания функциональные:  [Пройдено / Замечания] __________________
3) Испытания безопасности:    [Пройдено / Замечания] __________________
4) Испытания нагрузочные:     [Пройдено / Замечания] __________________
5) Комплект документов:       [Полный / Неполный] ______________________

Заключение комиссии:

- Итог:  [Принять / Принять с замечаниями / Отклонить]
- Перечень замечаний (при наличии):
  1. ________________________________________________________________
  2. ________________________________________________________________

Подписи:

- Заказчик: __________________ / ___________
- Исполнитель: _______________ / ___________
- Дата: «___» __________ 20__ г.
